-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE public.sales_transactions
(
    customer_id "char" NOT NULL,
    product_id "char" NOT NULL,
    quantity integer NOT NULL,
    sales_outlet_id integer NOT NULL,
    staff_id integer NOT NULL,
    date date NOT NULL,
    transaction_id bigint NOT NULL,
    "time" time without time zone NOT NULL,
    price numeric(2) NOT NULL,
    PRIMARY KEY (transaction_id)
);

CREATE TABLE public.products
(
    product_id integer NOT NULL,
    product_category character varying(50),
    product_name character varying(30) NOT NULL,
    description character varying(100),
    product_type character varying(50),
    price numeric(2) NOT NULL,
    PRIMARY KEY (product_id)
);
END;

============== normalized to :
BEGIN;

CREATE TABLE public.sales_transactions
(
    customer_id "char" NOT NULL,
    sales_outlet_id integer NOT NULL,
    staff_id integer NOT NULL,
    date date NOT NULL,
    "time" time without time zone NOT NULL,
    transaction_id bigint NOT NULL,
    PRIMARY KEY (transaction_id)
);

CREATE TABLE public.sales_detail
(
    transaction_id bigint NOT NULL,
    product_id "char" NOT NULL,
    quantity integer NOT NULL,
    price numeric(2) NOT NULL,
    PRIMARY KEY (transaction_id, product_id)
);
-- note product_type is more specific than product category so..
CREATE TABLE public.product_type
(
    product_type character varying(50),
    proudct_category character varying(50), 
    PRIMARY KEY (product_type)
)

CREATE TABLE public.products
(
    product_id integer NOT NULL,
    product_name character varying(30) NOT NULL,
    description character varying(100),
    product_type character varying(50),
    price numeric(2) NOT NULL,
    PRIMARY KEY (product_id)
);
END;